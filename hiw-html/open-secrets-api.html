<!doctype html>
<html>
<head>
	<script src="https://unpkg.com/react@15/dist/react.min.js"> </script><script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js">
</script>
<script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>

<meta charset="UTF-8">
<title>Open Secrets API</title>
	<link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/mdb.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">

<style>
	header{
	 text-align: center;
    padding-bottom: 3em;
	}
	.row {
		display: block;
	}
	
	#submit{
		width: 200px;
		
	}

	#map{
		height: 300px;
	}
	</style>
	
</head>
<body>
	<div class="container">
<p id="legislators">
<ul>

</ul>
</p>

<button id="reps" onClick="getLegislators()">Get Legislators</button>
<button id="reps" onClick="getIndustryDirectory()">Get Industry Directory</button>

</div>
</body>
<footer>
	<script src="assets/jquery/jquery-3.3.1.min.js"></script>
	<script src="assets/ajax-cross-origin/js/jquery.ajax-cross-origin.min.js"></script>
	<script type="text/javascript">

function getLegislators(){
	// REQUIRES STATE CODE | Two letters
  var state = "IL"
  var url = "https://www.opensecrets.org/api/?method=getLegislators&id="+state+"&apikey="+ KEY +"&output=json";
	fetch(url)
	.then(function(response){
	  return response.json();
  })
  .then(function(theJson) {
  	var data = JSON.parse(JSON.stringify(theJson));
  	var reps = data.response.legislator
  	console.log(reps)
	/*
	returns Array with the format

bioguide_id: "R000515"
birthdate: "1946-11-23"
cid: "N00004887"
comments: ""
congress_office: "2188 Rayburn House Office Building"
exit_code: "0"
facebook_id: "congressmanbobbyrush"
fax: "202-226-0333"
feccandid: "H2IL01042"
first_elected: "1992"
firstlast: "Bobby L Rush"
gender: "M"
lastname: "RUSH"
office: "IL01"
party: "D"
phone: "202-225-4372"
twitter_id: "RepBobbyRush"
votesmart_id: "26831"
webform: "https://rush.house.gov/contact-me/legislative-issues"
website: "http://rush.house.gov"
youtube_url: "https://youtube.com/CongressmanRush"


	*/
   // $('#legislators ul').append(JSON.stringify(theJson));
   // console.log(JSON.stringify(theJson))
  });
}

function getIndustryDirectory(){
	var GoogleKey = "AIzaSyBeJ7EpLw9vtzW1unbbFUkSY6gcsVeHGQs"

var url = 'https://sheets.googleapis.com/v4/spreadsheets/16MF5dxGiPa92WXLskT1OBK61eTa8CPSWOaEUBFTiZgc/values/crpIndustryCodes!A1:F460?key='+GoogleKey;

fetch(url)
	.then(function(response){
	  return response.json();
  })
  .then(function(theJson) {
  	console.log(JSON.parse(JSON.stringify(theJson)))
})
}

	</script>

</footer>
</html>
